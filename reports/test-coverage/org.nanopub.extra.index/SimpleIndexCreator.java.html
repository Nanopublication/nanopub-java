<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SimpleIndexCreator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">nanopub</a> &gt; <a href="index.source.html" class="el_package">org.nanopub.extra.index</a> &gt; <span class="el_source">SimpleIndexCreator.java</span></div><h1>SimpleIndexCreator.java</h1><pre class="source lang-java linenums">package org.nanopub.extra.index;

import org.eclipse.rdf4j.model.IRI;
import org.eclipse.rdf4j.model.impl.SimpleValueFactory;
import org.eclipse.rdf4j.model.vocabulary.DC;
import org.eclipse.rdf4j.model.vocabulary.DCTERMS;
import org.eclipse.rdf4j.model.vocabulary.RDFS;
import org.nanopub.NanopubCreator;

import java.util.ArrayList;
import java.util.List;

/**
 * A simple index creator for nanopublications.
 */
public abstract class SimpleIndexCreator extends NanopubIndexCreator {

    private String baseUri;
    private String title;
    private String description;
    private IRI license;
<span class="nc" id="L22">    private List&lt;String&gt; creators = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L23">    private List&lt;IRI&gt; seeAlsoUris = new ArrayList&lt;&gt;();</span>

    /**
     * Creates a new simple index creator with default settings.
     */
    public SimpleIndexCreator() {
<span class="nc" id="L29">        this(null, null, true);</span>
<span class="nc" id="L30">    }</span>

    /**
     * Creates a new simple index creator with the given previous index URI and trustiness setting.
     *
     * @param previousIndexUri the URI of the previous index
     * @param makeTrusty       if true the created nanopub will be trusty
     */
    public SimpleIndexCreator(IRI previousIndexUri, boolean makeTrusty) {
<span class="nc" id="L39">        this(null, previousIndexUri, makeTrusty);</span>
<span class="nc" id="L40">    }</span>

    /**
     * Creates a new simple index creator with trustiness setting.
     *
     * @param makeTrusty if true the created nanopub will be trusty
     */
    public SimpleIndexCreator(boolean makeTrusty) {
<span class="nc" id="L48">        this(null, null, makeTrusty);</span>
<span class="nc" id="L49">    }</span>

    /**
     * Creates a new simple index creator with the given base URI, previous index URI, and trustiness setting.
     *
     * @param baseUri          the base URI for the index nanopub
     * @param previousIndexUri the URI of the previous index
     * @param makeTrusty       if true the created nanopub will be trusty
     */
    public SimpleIndexCreator(String baseUri, IRI previousIndexUri, boolean makeTrusty) {
<span class="nc" id="L59">        super(previousIndexUri, makeTrusty);</span>
<span class="nc" id="L60">        this.baseUri = baseUri;</span>
<span class="nc" id="L61">    }</span>

    /**
     * Sets the base URI for the nanopublication index.
     *
     * @param baseUri the base URI to set
     */
    public void setBaseUri(String baseUri) {
<span class="nc" id="L69">        this.baseUri = baseUri;</span>
<span class="nc" id="L70">    }</span>

    /**
     * Sets the title of the nanopublication index.
     *
     * @param title the title to set
     */
    public void setTitle(String title) {
<span class="nc" id="L78">        this.title = title;</span>
<span class="nc" id="L79">    }</span>

    /**
     * Sets the description of the nanopublication index.
     *
     * @param description the description to set
     */
    public void setDescription(String description) {
<span class="nc" id="L87">        this.description = description;</span>
<span class="nc" id="L88">    }</span>

    /**
     * Sets the license for the nanopublication index.
     *
     * @param license the license IRI to set
     */
    public void setLicense(IRI license) {
<span class="nc" id="L96">        this.license = license;</span>
<span class="nc" id="L97">    }</span>

    /**
     * Adds a creator to the nanopublication index.
     *
     * @param creatorUriOrOrcid the URI or ORCID of the creator to add
     */
    public void addCreator(String creatorUriOrOrcid) {
<span class="nc" id="L105">        creators.add(creatorUriOrOrcid);</span>
<span class="nc" id="L106">    }</span>

    /**
     * Adds a seeAlso URI to the nanopublication index.
     *
     * @param seeAlsoUri the seeAlso URI to add
     */
    public void addSeeAlsoUri(IRI seeAlsoUri) {
<span class="nc" id="L114">        seeAlsoUris.add(seeAlsoUri);</span>
<span class="nc" id="L115">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    public String getBaseUri() {
<span class="nc" id="L122">        return baseUri;</span>
    }

    /**
     * {@inheritDoc}
     * &lt;p&gt;
     * Enriches an incomplete nanopublication index with metadata.
     */
    @Override
    public void enrichIncompleteIndex(NanopubCreator npCreator) {
<span class="nc bnc" id="L132" title="All 2 branches missed.">        if (title != null) {</span>
<span class="nc" id="L133">            npCreator.addPubinfoStatement(DC.TITLE, SimpleValueFactory.getInstance().createLiteral(title));</span>
        }
<span class="nc bnc" id="L135" title="All 2 branches missed.">        for (String creator : creators) {</span>
<span class="nc bnc" id="L136" title="All 2 branches missed.">            if (creator.indexOf(&quot;://&quot;) &gt; 0) {</span>
<span class="nc" id="L137">                npCreator.addCreator(SimpleValueFactory.getInstance().createIRI(creator));</span>
<span class="nc bnc" id="L138" title="All 2 branches missed.">            } else if (creator.matches(&quot;[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{3}[0-9X]&quot;)) {</span>
<span class="nc" id="L139">                npCreator.addCreator(creator);</span>
            } else {
<span class="nc" id="L141">                throw new IllegalArgumentException(&quot;Author has to be URI or ORCID: &quot; + creator);</span>
            }
<span class="nc" id="L143">        }</span>
<span class="nc bnc" id="L144" title="All 2 branches missed.">        if (license != null) {</span>
<span class="nc" id="L145">            npCreator.addPubinfoStatement(DCTERMS.LICENSE, license);</span>
        }
<span class="nc bnc" id="L147" title="All 2 branches missed.">        for (IRI seeAlsoUri : seeAlsoUris) {</span>
<span class="nc" id="L148">            npCreator.addPubinfoStatement(RDFS.SEEALSO, seeAlsoUri);</span>
<span class="nc" id="L149">        }</span>
<span class="nc" id="L150">    }</span>

    /**
     * {@inheritDoc}
     * &lt;p&gt;
     * Enriches a complete nanopublication index with additional metadata.
     */
    @Override
    public void enrichCompleteIndex(NanopubCreator npCreator) {
<span class="nc" id="L159">        enrichIncompleteIndex(npCreator);</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">        if (description != null) {</span>
<span class="nc" id="L161">            npCreator.addPubinfoStatement(DC.DESCRIPTION, SimpleValueFactory.getInstance().createLiteral(description));</span>
        }
<span class="nc" id="L163">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>